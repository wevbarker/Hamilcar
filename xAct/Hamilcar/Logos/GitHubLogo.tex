\documentclass[tikz]{standalone}
\usepackage{tikz}
\usetikzlibrary{3d}
\usepackage{etoolbox}
\usepackage{tensor}
\usepackage{xspace}
\usepackage{amsmath}
\usepackage[dvipsnames]{xcolor}
\usepackage{calc}
\input{Macros.tex}
\input{MacrosNames.tex}
\begin{document}
\begin{tikzpicture}[
    x={(1cm,0cm)},
    y={(0.4cm,0.3cm)},
    z={(0cm,1cm)}
]
% Padding (in screen coordinates)
\path[use as bounding box] (-0.5cm,-0.5cm) rectangle (20cm,5.5cm);

% Pale blue background
\fill[blue!5] (-0.5cm,-0.5cm) rectangle (20cm,5.5cm);

\foreach \xoffset in {0, 14} {
\begin{scope}[shift={(\xoffset,0,0)}]
% Foliated spacetime block - 3D
\def\nslices{3}
\def\cubesize{3}
\def\xsize{\cubesize}
\def\ysize{\cubesize}
\def\zsize{\cubesize}
\pgfmathsetmacro{\sliceheight}{\zsize/\nslices}
\def\curvature{0.12}

% Bounding cube
\pgfmathsetmacro{\zmax}{\nslices*\sliceheight}

% Annular Gaussian parameters (origin at sheet center)
\def\maxringradius{1.0}
\def\minsigma{0.2}
\def\maxsigma{0.6}
\def\maxamplitude{1.0}
\def\minamplitude{0.4}
\def\patchsize{0.5}
% Spiral modulation: r0 -> r0 + spiralamp * sin(spiralarms * theta + spiralradial * r)
\def\spiralamp{0.5}
\def\spiralarms{2}
\def\spiralradial{15}

% Vertical faces - colored for left figure, plain for right figure
\def\vpatchsize{0.5}

\ifdim\xoffset pt=0pt
% Precomputed colored patches for left figure (front face, right face, top slice)
\input{GitHubLogoPatchesLeft.tex}

% Back faces (lighter, behind)
\fill[blue!5, opacity=0.2] (0, \ysize, 0) -- (\xsize, \ysize, 0) -- (\xsize, \ysize, \zmax) -- (0, \ysize, \zmax) -- cycle;
\fill[blue!5, opacity=0.2] (0, 0, 0) -- (0, \ysize, 0) -- (0, \ysize, \zmax) -- (0, 0, \zmax) -- cycle;

\else
% Right figure: plain vertical faces
\fill[blue!5, opacity=0.3] (0, 0, 0) -- (\xsize, 0, 0) -- (\xsize, 0, \zmax) -- (0, 0, \zmax) -- cycle;
\fill[blue!5, opacity=0.3] (\xsize, 0, 0) -- (\xsize, \ysize, 0) -- (\xsize, \ysize, \zmax) -- (\xsize, 0, \zmax) -- cycle;
\fill[blue!5, opacity=0.2] (0, \ysize, 0) -- (\xsize, \ysize, 0) -- (\xsize, \ysize, \zmax) -- (0, \ysize, \zmax) -- cycle;
\fill[blue!5, opacity=0.2] (0, 0, 0) -- (0, \ysize, 0) -- (0, \ysize, \zmax) -- (0, 0, \zmax) -- cycle;
\fi

% Vertical edges only (no top/bottom frames) - curved like t-axis
\ifdim\xoffset pt=0pt\else
\draw[black!50, thick, dashed] (0, \ysize, 0)
    \foreach \zz in {0,0.1,...,\zmax} {
        -- ({0 + 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, {\ysize + 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, \zz)
    };
\fi
\draw[black!50, thick] (\xsize, 0, 0)
    \foreach \zz in {0,0.1,...,\zmax} {
        -- ({\xsize - 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, {0 - 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, \zz)
    };
\draw[black!50, thick] (0, 0, 0)
    \foreach \zz in {0,0.1,...,\zmax} {
        -- ({0 + 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, {0 - 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, \zz)
    };
\draw[black!50, thick] (\xsize, \ysize, 0)
    \foreach \zz in {0,0.1,...,\zmax} {
        -- ({\xsize - 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, {\ysize + 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, \zz)
    };

% Precomputed horizontal slice patches (right figure only - left figure patches included above)
\ifdim\xoffset pt=0pt\else
\input{GitHubLogoPatchesRight.tex}
\fi

% Draw slice edges - corners offset by vertical curve
\pgfmathtruncatemacro{\startslice}{\xoffset == 0 ? \nslices : 0}
\foreach \i in {\startslice,...,\nslices} {
    \pgfmathsetmacro{\zbase}{\i*\sliceheight}
    % Vertical curve offset at this height
    \pgfmathsetmacro{\vcurve}{0.5*\curvature*(1 - cos(\zbase*180/\zmax))}

    % Front edge (y=0): interpolate x offset from +vcurve at x=0 to -vcurve at x=xsize
    \draw[black!60, thick] ({0 + \vcurve}, {0 - \vcurve}, \zbase)
        \foreach \xx in {0,0.1,...,\xsize} {
            -- ({\xx + \vcurve*(1 - 2*\xx/\xsize)}, {0 - \vcurve}, {\zbase + \curvature*sin(\xx*180/\xsize)})
        };

    % Right edge (x=xsize): interpolate y offset from -vcurve at y=0 to +vcurve at y=ysize
    \draw[black!60, thick] ({\xsize - \vcurve}, {0 - \vcurve}, {\zbase + \curvature*sin(180)})
        \foreach \yy in {0,0.1,...,\ysize} {
            -- ({\xsize - \vcurve}, {\yy + \vcurve*(-1 + 2*\yy/\ysize)}, {\zbase + \curvature*sin(180) + \curvature*sin(\yy*180/\ysize)})
        };

    % Back edge (y=ysize): interpolate x offset from +vcurve at x=0 to -vcurve at x=xsize
    \draw[black!40, thick] ({0 + \vcurve}, {\ysize + \vcurve}, {\zbase + \curvature*sin(180)})
        \foreach \xx in {0,0.1,...,\xsize} {
            -- ({\xx + \vcurve*(1 - 2*\xx/\xsize)}, {\ysize + \vcurve}, {\zbase + \curvature*sin(\xx*180/\xsize) + \curvature*sin(180)})
        };

    % Left edge (x=0): interpolate y offset from -vcurve at y=0 to +vcurve at y=ysize
    \draw[black!40, thick] ({0 + \vcurve}, {0 - \vcurve}, \zbase)
        \foreach \yy in {0,0.1,...,\ysize} {
            -- ({0 + \vcurve}, {\yy + \vcurve*(-1 + 2*\yy/\ysize)}, {\zbase + \curvature*sin(\yy*180/\ysize)})
        };
}

% Circular orbit and black holes - positioned diagonally along corner-to-corner line
\pgfmathsetmacro{\orbitradius}{0.5}
\pgfmathsetmacro{\orbitz}{\zmax + 1.0}
% Diagonal angle: from (0,0) to (xsize,ysize) is 45 degrees in the xy plane
\pgfmathsetmacro{\diagangle}{135}
% Black hole positions on the circle at opposite ends of diagonal
\node[circle, fill=black, inner sep=3.5pt] (leftbh) at ({\xsize/2 + \orbitradius*cos(\diagangle+180)}, {\ysize/2 + \orbitradius*sin(\diagangle+180)}, \orbitz) {};
\node[circle, fill=black, inner sep=2.5pt] (rightbh) at ({\xsize/2 + \orbitradius*cos(\diagangle)}, {\ysize/2 + \orbitradius*sin(\diagangle)}, \orbitz) {};
% Draw the orbit circle
\draw[very thick, dotted] ({\xsize/2 + \orbitradius}, \ysize/2, \orbitz)
    \foreach \a in {10,20,...,360} {
        -- ({\xsize/2 + \orbitradius*cos(\a)}, {\ysize/2 + \orbitradius*sin(\a)}, \orbitz)
    };

% x and y axes on bottom edges (curved like foliation, smooth extension)
\pgfmathsetmacro{\xext}{\xsize + 0.6}
\pgfmathsetmacro{\yext}{\ysize + 1.0}
\draw[->, very thick] (0, 0, 0)
    \foreach \xx in {0,0.1,...,\xext} {
        -- (\xx, 0, {\curvature*sin(\xx*180/\xsize)})
    } node[right] {\sffamily\bfseries x};
\draw[->, very thick] (\xsize, 0, {\curvature*sin(180)})
    \foreach \yy in {0,0.1,...,\yext} {
        -- (\xsize, \yy, {\curvature*sin(180) + \curvature*sin(\yy*180/\ysize)})
    } node[above] {\sffamily\bfseries y};

% Time arrow (on back right vertical edge, slightly curved - starts vertical, curves inward)
\pgfmathsetmacro{\tarrowext}{\nslices*\sliceheight + 0.5}
\draw[->, very thick] (\xsize, \ysize, 0)
    \foreach \zz in {0,0.1,...,\tarrowext} {
        -- ({\xsize - 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, {\ysize + 0.5*\curvature*(1 - cos(\zz*180/\zmax))}, \zz)
    } node[above] {\sffamily\bfseries t};

\end{scope}
}

% Hamilcar title in the center
\node at (8.5, 1.5, 2.2) {\scalebox{5}{\sffamily\bfseries Hamilcar}};

% Subtitle below - scaled to match Hamilcar width exactly
% Using tabular for natural width, then resizebox to target width
\node[anchor=north] at (8.5, 1.5, 1.4) {%
    \resizebox{7.2cm}{!}{%
        \begin{tabular}[t]{@{}l@{}}
        \sffamily\bfseries Hamiltonian (canonical)\\
        \sffamily\bfseries analysis toolkit for xAct
        \end{tabular}%
    }%
};

\end{tikzpicture}
\end{document}
