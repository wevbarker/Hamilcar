In[#]:= $ManualSmearing = False; Perms = {}; Perms //= Join[#1, Permutations[{1, 1, 1, 1}]] & ; Perms //= Join[#1, Permutations[{1, 1, 1, -1}]] & ; Perms //= Join[#1, Permutations[{1, 1, -1, -1}]] & ; Perms //= Join[#1, Permutations[{1, -1, -1, -1}]] & ; Perms //= Join[#1, Permutations[{-1, -1, -1, -1}]] & ; Indices = (MapThread[Times, {{a, b, c, d}, #1}] & ) /@ Perms; AllConfigurations = ({G[#1, #2], ConjugateMomentumG[#3, #4]} & ) @@@ Indices; Expr = (Module[{Expr, Answ}, Expr = #1; Answ = (PoissonBracket[#1, #2, Parallel -> False] & ) @@ #1; Expr -> Answ] & ) /@ AllConfigurations; 